import Link from 'next/link'
import { Tabs, Tab, Callout } from 'nextra-theme-docs'


<div class="phpdocumentor-element -file">
    ## um-actions-wpadmin.php

        

    <section class="phpdocumentor-functions">
### Functions
<div class="phpdocumentor-element -function - ">
 #### um_block_wpadmin_by_user_role()
       

<div class="phpdocumentor-element-found-in">
    <Link href="../files/includes-core-um-actions-wpadmin.html#source-view.9">includes/core/um-actions-wpadmin.php</Link> : <span class="phpdocumentor-element-found-in__line">9</span>
</div>

<div class="phpdocumentor-summary">
Checks if user can access the backend
</div>


    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">um_block_wpadmin_by_user_role</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span>






<div className="py-4"></div>

</div>
<div class="phpdocumentor-element -function - ">
 #### um_control_admin_bar()
       

<div class="phpdocumentor-element-found-in">
    <Link href="../files/includes-core-um-actions-wpadmin.html#source-view.35">includes/core/um-actions-wpadmin.php</Link> : <span class="phpdocumentor-element-found-in__line">35</span>
</div>

<div class="phpdocumentor-summary">
Hide admin bar appropriately
</div>


    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">um_control_admin_bar</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">bool&nbsp;</span><span class="phpdocumentor-signature__argument__name">`$show`</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span>



    ##### Parameters
    <dl class="phpdocumentor-argument-list">
                    
                <span class="phpdocumentor-signature__argument__name">`$show`</span>
                : <span class="phpdocumentor-signature__argument__return-type">bool</span>
                            
           
                 

           
            </dl>



<div className="py-4"></div>

</div>
<div class="phpdocumentor-element -function - ">
 #### um_force_admin_bar()
       

<div class="phpdocumentor-element-found-in">
    <Link href="../files/includes-core-um-actions-wpadmin.html#source-view.48">includes/core/um-actions-wpadmin.php</Link> : <span class="phpdocumentor-element-found-in__line">48</span>
</div>

<div class="phpdocumentor-summary">
Fix permission for admin bar
</div>


    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">um_force_admin_bar</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span>






<div className="py-4"></div>

</div>
</section>

       ```php showLineNumbers=true copy
       <?php if ( ! defined( 'ABSPATH' ) ) {
	exit;
}


/**
 * Checks if user can access the backend
 */
function um_block_wpadmin_by_user_role() {
	global $pagenow;

	if ( is_admin() && ! defined( 'DOING_AJAX' ) ) {
		$action = empty( $_REQUEST['action'] ) ? '' : $_REQUEST['action'];

		// filter that it's not admin_post or admin_post_nopriv request
		if ( is_user_logged_in() && ! empty( $action ) && 'admin-post.php' == $pagenow ) {
			return;
		}

		if ( um_user( 'ID' ) && ! um_user( 'can_access_wpadmin' ) && ! is_super_admin( um_user( 'ID' ) ) ) {
			um_redirect_home();
		}
	}
}
add_action( 'init', 'um_block_wpadmin_by_user_role', 99 );


/**
 * Hide admin bar appropriately
 *
 * @param bool $show
 *
 * @return bool
 */
function um_control_admin_bar( $show ) {
	if ( is_user_logged_in() && UM()->roles()->um_user_can( 'can_not_see_adminbar' ) ) {
		$show = false;
	}

	return apply_filters( 'um_show_admin_bar_callback', $show );
}
add_filter( 'show_admin_bar', 'um_control_admin_bar', 9999, 1 );


/**
 * Fix permission for admin bar
 */
function um_force_admin_bar() {
	um_reset_user();
}
add_action( 'wp_footer', 'um_force_admin_bar' );

       ```
</div>
