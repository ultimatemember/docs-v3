---
---
# Test your integration
 Sandbox/Test Mode allows you to process subscriptions and simulate different payment responses using  [Stripe.com Test Cards](https://stripe.com/docs/testing#cards) . Toggle the Sandbox/Test Mode checkbox and ensure the API Keys are listed in the <strong>Ultimate Member &gt; Settings &gt; Extensions &gt; Stripe</strong>. After that, click the Subscription button or add a Stripe Subscription Plan field to a Register form to redirect you to the Stripe Checkout page and then add the test card details.

 To test the integration, ensure that you've read and set the required details in the following documentation before you proceed:

- [Setting up Webhook and Test/Public Keys](/docs-v3/um-stripe/article/1607-stripe-setting-up-webhook-and-test-public-keys)
- [Setting up Stripe Success and Cancel Payment Pages](/docs-v3/um-stripe/article/1609-stripe---setting-up-stripe-success-and-cancel-payment-pages)
- [Create Subscription Prices](/docs-v3/um-stripe/article/1617-create-subscription-prices)
- [Shortcodes &amp; Subscription Events](/docs-v3/um-stripe/article/1616-stripe-shortcodes-reference)
- [Add Subscription Plans to a Register Form](/docs-v3/um-stripe/article/1634-stripe---add-subscription-plans-to-a-registeration-form)
- [Create &amp; Test Customer Billings](/docs-v3/um-stripe/article/1611-stripe---create-test-customer-billings)

> <strong>Note:</strong>  Use the Stripe CLI to simulate Stripe events in your local environment. You must add the parameter /?umm-stripe-webhook=true in the localhost URL, e.g.,  [http://localhost:4242/?umm-stripe-webhook=true](http://localhost:4242/?umm-stripe-webhook=true)  as your local webhook URL.
> 
>  <strong>To learn more about the Stripe CLI, please see this doc article:</strong>  [/docs-v3/um-stripe/article/1864-stripe-cli-integration](/docs-v3/um-stripe/article/1864-stripe-cli-integration)

> <strong>Recommendation:</strong> Stripe has a Test Clock feature where you can simulate the Stripe events by advancing time. Please see this article:  [ /docs-v3/um-stripe/article/1803-test-your-integration-with-stripe-test-clocks](/docs-v3/um-stripe/article/1803-test-your-integration-with-stripe-test-clocks)

 <strong>Warning: When testing, please use a subscriber account instead of an administrator account. When you use an administrator account, it won't remove the roles assigned to it, and this is to prevent you from being locked out as an admin.</strong>

### Testing the Subscription Statuses and Assigning Roles 

1. Using your Admin account, add a new user with a subscriber role.
2. Open the <strong>WP Admin &gt; Users</strong> page with your Admin account and see the Role column. <strong>Keep this browser window open during testing. ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3474fffa21909875f0a0d/file-QMmsHDH2D0.png)</strong>
3. Add the  [Stripe shortcode](/docs-v3/um-stripe/article/1616-stripe-shortcodes-reference)  to a Page or the Stripe Plan predefined field to a Register form.
4. Using a different browser, log in to the site using the subscriber account you've created.   ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c348aaffa21909875f0a0f/file-6YH6k1ggXh.png)
5. Then go to the subscription page where you've setup your products or subscription, click on the Stripe button to proceed to the checkout page. A user must be logged in for the redirection to work when using the Stripe button.   ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c349a68106ae1c4ab6f3c4/file-GPmaohpGsq.png)
6. Use the Test Credit Cards from  [Stripe.com Test Cards](https://stripe.com/docs/testing#cards)  to pay the subscription plan. For testing, you can use this Credit Card Number <strong>4242 4242 4242 4242</strong>. For the Year and Month, use <strong>4/42; for</strong> the CCV, use <strong>424</strong>.   ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c34b7a0a12eb325db17723/file-rJ8cNwADOC.png)
7. When the payment processing is successful with the test account, you can go to the other browser with the Admin account and then check in the <strong>WP Admin &gt; Users</strong> and see if the test subscriber's role and status has changed. The user role you've set in your Stripe Plan Subscription settings should be assigned to this user.   
      ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c34dc80a12eb325db1772a/file-3a8So7DdP2.png)
8. Now to test if <strong>pause</strong> and <strong>resume</strong> roles are getting assigned to the test subscriber account, go to the other browser and use the subscriber account and then go to the  [Customer Billing](/docs-v3/um-stripe/article/1611-stripe---create-test-customer-billings)  page and click on the button to proceed to the Stripe Customer Billing/Portal page. Click the <strong>"Cancel Plan"</strong> button.  
      ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c34f0f0a12eb325db1772d/file-wMVC24Gp6L.png)
9. Choose <strong>"Pause Subscription"</strong> then click the <strong>"Pause plan"</strong> button. Using the Admin account, check in <strong>WP Admin &gt; Users</strong> if the role has changed. Ensure that the <strong>"pause"</strong> attribute has a role for it to work.   ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3b4030a12eb325db1778c/file-0SDBEh1FYi.png)
    
      ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3cc0efbf333026591a21b/file-Jq5K9wvZDr.png)
    
     <strong>Note:</strong> We created the roles in wp-admin&gt;Ultimate Member&gt;User Roles to demonstrate the integration; the subscription status in the Role column is not the actual status but a role.
10. On the same subscriber's Stripe Customer Portal, click on <strong>"Resume Plan."</strong> Again, check if the test account's user role has changed in the <strong>WP Admin &gt; Users.  ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3cd25ffa21909875f0aa5/file-xgOEXDDMMl.png)  ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3cdaaffa21909875f0aa9/file-LCBhal5H4D.png)</strong>
11. In the subscriber's account go Customer Billing Portal page&gt;Manage Billings&gt;Click the <strong>"Cancel"</strong> button to test the <strong>"Cancel Plan"</strong> role. From the billing page,select "<strong>Cancel Subscription"</strong> and click on the <strong>"Cancel plan"</strong> button. Check in <strong>wp-admin&gt;Users</strong> if the role has changed.   ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3d51a0a12eb325db177b6/file-mE9Ny7CWyC.png)  ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3d5bffbf333026591a22b/file-ZEdsxtU4ol.png)
12. To the the <strong>"Trialing"</strong> and <strong>"Past Due"</strong> status and roles,use the user's account and subscribe to a plan with Free Trial. In the example below, Premium Plan has 3 days trial. So the test subscriber account will subscribe to the Premium plan using this Credit Card Number <strong>4000 0000 0000 3220.</strong> For the Year and Month, use <strong>3/24; for</strong> the CCV, use <strong>232.</strong>  After clicking the <strong>"Start trial"</strong> button a popup 3D secure will show. Click the <strong>"Complete"</strong> button to continue. <strong>![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3d7e1ffa21909875f0ab7/file-c50dhzaUaU.png)</strong>
13. Check in the <strong>wp-admin&gt;Users</strong> if the role and status has changed to '<strong>Trialing</strong>.' ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3dbb5fbf333026591a22f/file-iHEImS56RG.png)
14. Then go to  [https://dashboard.stripe.com/test/customers](https://dashboard.stripe.com/test/customers) , look for the test subscriber and click on it. You'll be redirected to the customer's overview. In '<strong>Subscriptions,'</strong> click the pencil icon to <strong>"Update subscription."</strong>  
      ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3dca00a12eb325db177bd/file-fH1iShKfzc.png)  ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3dd7bfbf333026591a234/file-voVPGjuhSr.png) Scroll down to the Subscription schedule, then change the <strong>Free Trial days</strong> value to <strong>0.</strong> Click on the "<strong>Update subscription"</strong> button.
15. ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3df158106ae1c4ab6f493/file-RloDMOYBGB.png)  A 3D secure popup window will appear. To continue, click the <strong>"Update subscription"</strong> button.&lt; After the update, check if the role and status changed to  <strong>"Past due"</strong> in <strong>wp-admin&gt;Users.  ![](https://s3.amazonaws.com/helpscout.net/docs/assets/561c96629033600a7a36d662/images/65c3e047fbf333026591a236/file-nYEqcVfVdY.png)</strong>

> <strong><strong>Note: When the trial period ends, it will automatically set the subscription status to "active." Ensure that the "active" attribute has a role assigned to it so that the subscriber's role will be changed.</strong></strong>