import{_ as t,r as p,o,c as i,a as c,b as a,d as s,e as l}from"./app-1c7faa4a.js";const r={},u={href:"/article/1607-stripe-setting-up-webhook-and-test-public-keys.html",target:"_blank",rel:"noopener noreferrer"};function d(k,n){const e=p("ExternalLinkIcon");return o(),i("div",null,[n[3]||(n[3]=c(`<h1 id="send-admin-email-notification" tabindex="-1"><a class="header-anchor" href="#send-admin-email-notification" aria-hidden="true">#</a> Send admin email notification</h1><p>This code snippet sends an admin notificaiton when there&#39;s a newly created Stripe customer.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">&#39;um_stripe_webhook_payload_event_init&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;um_09202023_stripe_webhook_payload_event_init&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-definition function">um_09202023_stripe_webhook_payload_event_init</span><span class="token punctuation">(</span> <span class="token variable">$event</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 
		<span class="token comment">// Handle the event.</span>
			<span class="token keyword">switch</span> <span class="token punctuation">(</span> <span class="token variable">$event</span><span class="token operator">-&gt;</span><span class="token property">type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token doc-comment comment">/**
				 * Event type
				 */</span>
				<span class="token keyword">case</span> <span class="token string single-quoted-string">&#39;customer.created&#39;</span><span class="token punctuation">:</span>
               <span class="token variable">$headers</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;From: Me Myself &lt;me@example.net&gt;&#39;</span><span class="token punctuation">;</span>
               <span class="token variable">$headers</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Cc: Ultimate Mebmber&lt;stripe@ultimatemember.com&gt;&#39;</span><span class="token punctuation">;</span>

               <span class="token variable">$to</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;me@yoursitedomain.com&#39;</span><span class="token punctuation">;</span>
               <span class="token variable">$subject</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;New Stripe Customer created from your site &#39;</span> <span class="token operator">.</span> <span class="token function">site_url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token variable">$message</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Hi, there\\&#39;s a new customer created!&#39;</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;\\n&#39;</span><span class="token punctuation">;</span>
               <span class="token variable">$message</span> <span class="token operator">=</span><span class="token operator">.</span> <span class="token string single-quoted-string">&#39;Customer\\&#39;s Email address: &#39;</span> <span class="token operator">.</span> <span class="token variable">$customer</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">;</span>

               <span class="token function">wp_mail</span><span class="token punctuation">(</span> <span class="token variable">$to</span><span class="token punctuation">,</span> <span class="token variable">$subject</span><span class="token punctuation">,</span> <span class="token variable">$message</span><span class="token punctuation">,</span> <span class="token variable">$headers</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),a("p",null,[n[1]||(n[1]=s("You can check the Stripe Webhook event types in this ")),a("a",u,[n[0]||(n[0]=s("doc article")),l(e)]),n[2]||(n[2]=s("."))])])}const v=t(r,[["render",d],["__file","ca7e9f9de38e4ec7ab6f5eee992b29d2.html.vue"]]);export{v as default};
